<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MQTT</title>
  <!-- Css de la página-->
  <link rel="stylesheet" href="..\css/style.css">

  <!-- Librería del MQTT -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/paho-mqtt/1.0.1/mqttws31.js" type="text/javascript"></script>

  <!-- Librerías para el gauge -->
  <script src="https://cdn.amcharts.com/lib/5/index.js"></script>
  <script src="https://cdn.amcharts.com/lib/5/xy.js"></script>
  <script src="https://cdn.amcharts.com/lib/5/radar.js"></script>
  <script src="https://cdn.amcharts.com/lib/5/themes/Animated.js"></script>

  <!-- Bootstrap -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
</head>

<body>
  <div>
    <h1>Ejemplo MQTT</h1>
  </div>
  <div>
    <h2>Temperatura</h2>
  </div>
  <div>
    <div style="display: inline-block;">
      <div style="display: inline-block;">
        <p style="margin-top: 0;">Valor (en ºC): </p>
      </div>
      <div style="display: inline-block;">
        <p id="ValorTemp" style="margin-top: 0;"></p>
      </div>
    </div>

    <div id="chartdiv"></div>
  </div>

  <div>
    <h2>Relé</h2>
  </div>
  <div style="display: inline-block;">
    <div style="display: inline-block;">
      <p style="margin-top: 0;">Valor (1 o 0): </p>
    </div>
    <div style="display: inline-block;">
      <p id="ValorRelay" style="margin-top: 0;"></p>
    </div>
  </div>
  <div>
    <button onclick="changeRelay()">Cambiar estado</button>
  </div>

  <script src="..\js/gauge.js"></script>
  <script src="..\js/iot-mqtt.js"></script>
</body>

</html>

<script>
  var EstadoRelay = '1';
  function changeRelay() {
    if (EstadoRelay == '1') {
      client.send('Relay', '0');
      return EstadoRelay = 0;
    }
    if (EstadoRelay == '0') {
      client.send('Relay', '1');
      return EstadoRelay = 1;
    }
  }
</script>